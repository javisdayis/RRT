<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <title>
    Tutorial &middot; 
    Reproducibile R Toolkit
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://revolutionanalytics.github.io/RRT//public/css/hyde.css">
  <link rel="stylesheet" href="http://revolutionanalytics.github.io/RRT//public/css/syntax.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface">


  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://revolutionanalytics.github.io/RRT//public/favicon.ico">
  <link rel="shortcut icon" href="http://revolutionanalytics.github.io/RRT//public/favicon.ico">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet">
</head>


  <body class="theme-base-08">

    <header class="masthead">
      <div class="masthead-inner">
        <h1>RRT</h1>
        <!-- <h1> <a href="http://revolutionanalytics.github.io/RRT/">RRT</a></h1> -->
        <p class="lead">Reproducibile R Toolkit</p>

        <div class="colophon">
          <ul class="colophon-links">
            <li>
              <a href="http://revolutionanalytics.github.io/RRT/">Home</a><br>
              <a href="http://revolutionanalytics.github.io/RRT/installation">Installation</a><br>
              <a href="http://revolutionanalytics.github.io/RRT/tutorial">Tutorial</a><br>
              <a href="http://revolutionanalytics.github.io/RRT/mran">MRAN</a><br>
              <a href="https://github.com/RevolutionAnalytics/RRT/issues">Issue Tracker</a><br>
              <a href="https://github.com/RevolutionAnalytics/RRT/issues/new">Report a bug/Feature request</a><br>
              <a href="https://github.com/RevolutionAnalytics/RRT">Source Code</a><br>
              <a href="https://github.com/RevolutionAnalytics/RRT/archive/v0.1.0.zip">Download (v0.2)</a>
            </li>
          </ul>
          <!-- hyde theme from <a href="https://github.com/mdo/hyde">Hyde</a> from <a href="https://twitter.com/mdo" target="_blank">@mdo</a>-->
        </div>
      </div>
    </header>

    <div class="content container">
      <div class="page">
  <h1 class="page-title">Tutorial</h1>
  <ul>
<li><a href="#installrrt">Install RRT</a></li>
<li><a href="#createrrt">Create an RRT repository</a>

<ul>
<li><a href="#nouserinput">w/o user input</a></li>
<li><a href="#userinput">w/ user input</a></li>
</ul>
</li>
<li><a href="#refresh">Refresh repository</a></li>
<li><a href="#installpkgs">Install packages</a></li>
<li><a href="#compatibility">Package compatibility check</a></li>
<li><a href="#browsing">Browse your RRT repositories</a></li>
<li><a href="#listing">Get a list of repositories within R</a></li>
<li><a href="#starting">Starting R from a repo</a></li>
<li><a href="#mran">Get packages from MRAN </a></li>
<li><a href="#clean">Clean ('sweep') out all packages from your repository</a></li>
</ul>


<h3><a href="#installrrt" name="installrrt">#</a> Install <code>RRT</code></h3>

<p>On Linux, get xml C library first (on the command line)</p>

<pre><code>(sudo) apt-get update
(sudo) apt-get install r-cran-xml
</code></pre>

<p>You may need libcurl too. Do report in the issues tab if you run into this problem.</p>

<p>In an <code>R</code> session</p>

<pre><code class="r">install.packages("devtools")
library("devtools")
</code></pre>

<p>Then install <code>RRT</code></p>

<pre><code class="r">devtools::install_github("RevolutionAnalytics/RRT")
library("RRT")
</code></pre>

<h3><a href="#createrrt" name="createrrt">#</a> Create an RRT repository</h3>

<h4><a href="#nouserinput" name="nouserinput">#</a> Create a repo without user input</h4>

<pre><code class="r">checkpoint("2014-07-11", "~/mynewrepository")
</code></pre>

<pre><code class="r">Checking to see if repository exists already...
Creating repository ~/mynewrepository
Checking to make sure rrt directory exists inside your repository...
Creating rrt directory ~/mynewrepository/rrt/lib/x86_64-apple-darwin13.1.0/3.1.0
Looking for packages used in your repository...
Writing repository manifest...

&gt;&gt;&gt; RRT initialization completed.
</code></pre>

<p>You should now have a RRT repository</p>

<h4><a href="#userinput" name="userinput">#</a> Or create a repo interactively</h4>

<p>This process will ask you questions</p>

<pre><code class="r">checkpoint("2014-07-11", interactive=TRUE)
</code></pre>

<pre><code class="r">Repository name (default: random name generated):
somenewrepo # user entered

Repository path (default: home directory + repository name):
 # user left blank

Repository author(s) (default: left blank):
Scott Chamberlain # user entered

Repo license (default: MIT):
GPL-2 # user entered

Repo description (default: left blank):
A repository for research on x, y, and z # user entered

Repo remote git or svn repo (default: left blank):
https://github.com/sckott/somenewrepo # user entered
</code></pre>

<p>With similar message as above for other checks</p>

<pre><code class="r">Checking to see if repository exists already...
Creating repository /Users/sacmac/somenewrepo
Checking to make sure rrt directory exists inside your repository...
Creating rrt directory /Users/sacmac/somenewrepo/rrt/lib/x86_64-apple-darwin13.1.0/3.1.0
Looking for packages used in your repository...
Writing repository manifest...

&gt;&gt;&gt; RRT initialization completed.
</code></pre>

<h3><a href="#refresh" name="refresh">#</a> Refresh repository</h3>

<p>To make <code>RRT</code> as simple as possible, there is a function called <code>rrt_refresh()</code>, used to update the packages installed locally in your repository by looking through the repository files again for new packages. However, you only need to run <code>checkpoint()</code> again, as we know you already have an <code>RRT</code> repository, so we run <code>rrt_refresh()</code> instead of <code>rrt_init()</code>. After we initiated a new repo above with <code>rrt_init()</code> we may add some code in a <code>code.R</code> file. Then we want to update the packages in the repo, which can be done with <code>checkpoint()</code>. Note that we don't have to pass in the repo path (unless your current working directory isn't the folder in question) or the <code>snapshotdate</code> parameter.</p>

<pre><code class="r">checkpoint()
</code></pre>

<pre><code class="r">Checking to make sure repository exists...
Checking to make sure rrt directory exists inside your repository...
Looking for packages used in your repository...
Getting new packages...
Creating new folders: ~/mynewrepository/rrt/lib/x86_64-apple-darwin13.1.0/3.1.0/src/contrib
trying URL 'http://cran.r-project.org/src/contrib/plyr_1.8.1.tar.gz'
Content type 'application/x-gzip' length 393233 bytes (384 Kb)
opened URL
==================================================
downloaded 384 Kb

trying URL 'http://cran.r-project.org/src/contrib/Rcpp_0.11.2.tar.gz'
Content type 'application/x-gzip' length 2004313 bytes (1.9 Mb)
opened URL
==================================================
downloaded 1.9 Mb

Writing repository manifest...

&gt;&gt;&gt; RRT refresh completed.
</code></pre>

<p>As you can see <code>checkpoint()</code> scans the repo for new packages used, downloads them if any new ones, and updates the manifest file.</p>

<h3><a href="#installpkgs" name="installpkgs">#</a> Install packages</h3>

<p>In addition to downloading packages, <code>checkpoint()</code> installs any packages that are downloaded, but not yet installed. The package download and installation steps are separate, but we do them all in one step with the <code>checkpoint()</code> function so you don't have to worry about it.</p>

<h3><a href="#compatibility" name="compatibility">#</a> Package compatibility check</h3>

<p>This will be done by <code>rrt_compat()</code> - this function is not done yet...</p>

<h3><a href="#browsing" name="browsing">#</a> Browse your RRT repositories</h3>

<p>This function uses <code>rrt_repos_list()</code> (see below) internally, and uses the <code>whisker</code> R package to build a series of web pages to easily understand what RRT repos exist on your machine, their details, etc.</p>

<pre><code class="r">rrt_browse()
</code></pre>

<p>Should open up a web page in your default browser</p>

<p><img src="../public/img/browse1.png" alt="" /></p>

<p>You can click on each green button to get to more detailed data for each repository</p>

<p><img src="../public/img/browse2.png" alt="" /></p>

<h3><a href="#listing" name="listing">#</a> Get a list of repositories within R</h3>

<pre><code class="r">rrt_repos_list()
</code></pre>

<pre><code class="r">No. repos: 8
First 10 repo ids : 29307e120a662d571bfd9fa1395f426e, 277c8be765b8fa66fb8180204459d408, 8ebc7000ea66165b24ba492d99a729fc, 543e3adeb00dfec82628addcb2dffbb4, 4177de12146511bf69a6d6cec69eb8d2, 1a6f0d8a387c0854464d260da141a9ea, 837809181e43446a37f550c0ef38c125, 0b34a89dda7b251d24c39fd90bf9881c
</code></pre>

<pre><code class="r">rrt_repos_list()[[1]]
</code></pre>

<pre><code class="r">$repo
[1] "~/howdydoody//rrt/rrt_manifest.txt"

$InstalledWith
[1] "RRT"

$InstalledFrom
[1] "source"

$RRT_version
[1] "0.0.1"

$R_version
[1] "3.1.0"

$DateCreated
[1] "2014-20-16"

$PkgsInstalledAt
[1] "/Users/sacmac/howdydoody//rrt/lib/x86_64-apple-darwin13.1.0/3.1.0"

$RepoID
[1] "29307e120a662d571bfd9fa1395f426e"

$Packages
[1] "colorspace,dichromat,digest,ggplot2,gtable,labeling,MASS,munsell,plyr,proto,RColorBrewer,Rcpp,reshape2,scales,stringr,lattice"

$SystemRequirements
[1] ""

$repo_root
[1] "~/howdydoody/"
</code></pre>

<h3><a href="#starting" name="starting">#</a> Starting R from a repo</h3>

<p>If you start R from a RRT repository R will use the repository specific <code>.Rprofile</code> file and look for packages in the repository to install instead of the global R packages library.</p>

<h3><a href="#mran" name="mran">#</a> Get packages from MRAN</h3>

<p>Note: this doesn't install them, only downloads them.</p>

<pre><code class="r">pkgs_mran(pkgs = c("plyr","ggplot2","dplyr","taxize"), outdir = "~/mypkgs")
</code></pre>

<pre><code class="r">... Downloading package files
</code></pre>

<p>Which results in the following files in the directory <code>mypkgs</code>:</p>

<pre><code>dplyr_0.2.tar.gz
ggplot2_1.0.0.tar.gz
plyr_1.8.1.tar.gz
taxize_0.3.0.tar.gz
</code></pre>

<p>You can also install from MRAN using a more traditional approach using <code>install.packages()</code></p>

<pre><code class="r">install.packages("http://mran.revolutionanalytics.com/snapshots/src/2014-07-18_0500/stringr/stringr_0.6.2.tar.gz", repos = NULL, type="source")
</code></pre>

<pre><code class="r">Installing package into ‘/Users/sacmac/Library/R/3.1/library’
(as ‘lib’ is unspecified)
trying URL 'http://mran.revolutionanalytics.com/snapshots/src/2014-07-18_0500/stringr/stringr_0.6.2.tar.gz'
Content type 'application/octet-stream' length 20636 bytes (20 Kb)
opened URL
==================================================
downloaded 20 Kb

* installing *source* package ‘stringr’ ...
** package ‘stringr’ successfully unpacked and MD5 sums checked
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
* DONE (stringr)
</code></pre>

<p>Or just download using <code>download.packages()</code></p>

<pre><code class="r">download.file("http://mran.revolutionanalytics.com/snapshots/src/2014-07-18_0500/stringr/stringr_0.6.2.tar.gz", destfile = 'stringr_0.6.2.tar.gz')
</code></pre>

<pre><code class="r">trying URL 'http://mran.revolutionanalytics.com/snapshots/src/2014-07-18_0500/stringr/stringr_0.6.2.tar.gz'
Content type 'application/octet-stream' length 20636 bytes (20 Kb)
opened URL
==================================================
downloaded 20 Kb
</code></pre>

<p>You can also get binaries from MRAN:</p>

<p>Download:</p>

<pre><code class="r">download.file("http://mran.revolutionanalytics.com/snapshots/bin/macosx/2014-07-15_0043/stringr_0.6.2.tgz", destfile = "stringr_0.6.2.tgz")
</code></pre>

<p>Install</p>

<pre><code class="r">install.packages("http://mran.revolutionanalytics.com/snapshots/bin/macosx/2014-07-15_0043/stringr_0.6.2.tgz", repos=NULL)
</code></pre>

<p>Note that MRAN is not a "CRAN-like" repository so you can't just use <code>install.packages()</code> as you normally would like <code>install.packages("stringr")</code>.</p>

<h3><a href="#clean" name="clean">#</a> Clean</h3>

<p>You can clean out all package sources and installed packages from your repository with a single easy to use function: <code>rrt_sweep()</code>. This defaults to work from your current working directory, and deletes all package sources and installed packages. This basically creates a clean slate in your <code>rrt/</code> directory in your respository. Your manifest file is unchanged though to retain metadata important to replication of your efforts.</p>

<pre><code class="r">rrt_sweep()
</code></pre>

<pre><code class="r">Checking to make sure repository exists...
Checking to make sure rrt directory exists inside your repository...
Package sources removed
Your repository packages successfully removed:
abind
doMC
foreach
iterators
itertools
plyr
Rcpp
testthat
</code></pre>

<p>This leaves you with all your personal files, your <code>rrt/</code> directory, and your manifest file intact.</p>

</div>

    </div>

  </body>

  <!-- <footer>

<!-- Start of StatCounter -->
<script type="text/javascript">
var sc_project=9889491; 
var sc_invisible=1; 
var sc_security="20d769e7"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="click tracking"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="http://c.statcounter.com/9889491/0/20d769e7/1/"
alt="click tracking"></a></div></noscript>
<!-- End of StatCounter -->
<a href="http://statcounter.com/p9889491/?guest=1">Visitor Stats</a>

  <!-- Gaug.es Analytics -->
  <script type="text/javascript">
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '53ad81c88bfdf738fe00d730');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>
</footer>
 -->
</html>
